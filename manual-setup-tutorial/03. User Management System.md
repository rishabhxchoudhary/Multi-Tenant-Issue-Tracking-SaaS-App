# ğŸ‘¤ Part 3: User Management System (Amazon Cognito)

## What We'll Accomplish in This Part

By the end of this tutorial, you will:
- âœ… Understand how user authentication works in a multi-tenant issue tracker
- âœ… Set up Amazon Cognito User Pools for managing different companies
- âœ… Create different user groups for different roles (User, Admin, Super Admin)
- âœ… Configure sign-up and sign-in workflows for your issue tracker
- âœ… Set up user attributes and custom claims for issue tracking
- âœ… Test user registration and authentication
- âœ… Understand how tenant isolation works at the user level
- âœ… Connect user roles to the IAM roles we created in Part 2

**â° Estimated Time: 75-90 minutes (about watching a long movie)**

## What is Amazon Cognito? (Explained Like You're 13)

Think of Amazon Cognito like a **smart digital doorman for your issue tracker**:

ğŸ¢ **School Analogy**:
- **School Building**: Your issue tracker application
- **Main Office**: Cognito User Pool (checks if you're a valid student/teacher)
- **Student ID Cards**: Authentication tokens (prove you belong to a specific class/company)
- **Student Registry**: User database (stores all student information and which class they belong to)
- **Class Schedules**: User roles (determines what rooms you can access)
- **Different Schools**: Different companies using your issue tracker

### Why Cognito for Issue Tracking?

In a multi-tenant issue tracker:
- **Company A's users** should never see **Company B's** issues
- **Different user types** need different permissions (User vs Admin vs Super Admin)
- **Sign-up process** should automatically assign users to the right company
- **Security** must be bulletproof (can't let hackers in)
- **Easy login** so people actually want to use your issue tracker

## Understanding Multi-Tenant User Management

### Single-Tenant vs Multi-Tenant (Simple Explanation)

**Single-Tenant (like a private school)**:
- One issue tracker = One company
- All users belong to the same organization
- Simple user management (everyone sees the same issues)

**Multi-Tenant (like a school district with many schools)**:
- One issue tracker = Many companies (tenants)
- Users belong to different companies
- Complex user management with complete separation

### Our Issue Tracker User Architecture

```
ğŸ¢ Our Issue Tracker Application
â”œâ”€â”€ ğŸ¦ TechCorp (Basic Tier Company)
â”‚   â”œâ”€â”€ ğŸ”´ Sarah (Super Admin) - Can add/remove users
â”‚   â”œâ”€â”€ ğŸŸ¡ Mike (Admin) - Can create teams and assign issues
â”‚   â””â”€â”€ ğŸ”µ John (User) - Can create and work on issues
â”œâ”€â”€ ğŸª StartupInc (Premium Tier Company)  
â”‚   â”œâ”€â”€ ğŸ”´ Alex (Super Admin) - Can add/remove users
â”‚   â”œâ”€â”€ ğŸŸ¡ Emma (Admin) - Can create teams and assign issues
â”‚   â”œâ”€â”€ ğŸ”µ David (User) - Can create and work on issues
â”‚   â””â”€â”€ ğŸ”µ Lisa (User) - Can create and work on issues
â”œâ”€â”€ ğŸ­ BigCorp (Platinum Tier Company)
â”‚   â”œâ”€â”€ ğŸ”´ James (Super Admin) - Can add/remove users
â”‚   â”œâ”€â”€ ğŸŸ¡ Maria (Admin) - Can create teams and assign issues
â”‚   â””â”€â”€ ğŸ”µ Kevin (User) - Can create and work on issues
â””â”€â”€ ğŸ‘‘ You (Root User) - Can manage ALL companies and users
```

## Step 1: Understanding Cognito Components

### 1.1 Key Concepts (Simple Explanations)

**User Pool**: Like a **digital phone book for a company**
- Stores user information (email, name, password, role)
- Handles sign-up and sign-in for that company
- Manages user groups and roles
- Keeps different companies completely separate

**User Pool Client**: Like different **entrances to the same building**
- Web app entrance (your website login)
- Mobile app entrance (if you build a mobile app later)
- Each has different security settings

**User Groups**: Like **different departments in a company**
- Users (can create and work on issues)
- Admins (can create teams and assign issues)
- Super Admins (can add/remove users and change roles)

**Custom Attributes**: Like **special notes on employee badges**
- Company ID (which company they belong to)
- User role (User, Admin, Super Admin)
- Subscription tier (Basic, Premium, Platinum)
- Join date, team memberships, etc.

## Step 2: Create Your First User Pool

### 2.1 Access Amazon Cognito

Think of this like going to the school administration office to set up student accounts:

1. **Sign in** to AWS Console (as your IAM user from Part 2)
2. **Search** for `Cognito`
3. **Click "Amazon Cognito"**
4. **Click "Create user pool"**

### 2.2 Configure Sign-In Experience

**Step 1 - Authentication providers:**

Think of this like choosing how students can prove who they are:

**How do you want your users to sign in?**
- âœ… **Email** (most people prefer this - like using school email)
- âŒ User name (uncheck - usernames are confusing)
- âŒ Phone number (uncheck for now - we'll keep it simple)

**Cognito user pool sign-in options:**
- âœ… **Email** (primary sign-in method)
- âŒ User name (uncheck)
- âŒ Phone number (uncheck)

**Why email?** Most people using issue trackers prefer email sign-in, and it's professional.

**Multi-factor authentication (MFA):**
- Select **"Optional"** (users can turn it on if they want extra security)
- **MFA methods**: âœ… **SMS** and âœ… **Time-based one-time password (TOTP)**

**User account recovery:**
- âœ… **Enable self-service account recovery**
- âœ… **Email only** (for password reset)

**Click "Next"**

### 2.3 Configure Security Requirements

**Step 2 - Security requirements:**

Think of this like setting rules for how strong student passwords must be:

**Password policy:**
- **Password minimum length**: `8` (not too short)
- **Password requirements**: 
  - âœ… Contains at least 1 number
  - âœ… Contains at least 1 special character (!@#$%^&*)
  - âœ… Contains at least 1 uppercase letter
  - âœ… Contains at least 1 lowercase letter

This ensures passwords are strong enough to keep hackers out!

**Multi-factor authentication:**
- Keep **"Optional"** selected
- **MFA methods**: Keep SMS and TOTP checked

**User account recovery:**
- Keep **"Enable self-service account recovery - Recommended"** checked
- **Delivery method**: Email only

**Click "Next"**

### 2.4 Configure Sign-Up Experience

**Step 3 - Sign-up experience:**

This is like setting up the enrollment process for new users.

**Self-service sign-up:**
- âœ… **Enable self-registration** (let people join companies themselves)

**Attribute verification and user account confirmation:**
- âœ… **Send email verification messages** (make sure they have a real email)
- âŒ **Send SMS verification messages** (uncheck to keep it simple)

**Verifying attribute changes:**
- âœ… **Keep original attribute value active when an update is pending** 
- **Active attribute values**: âœ… **Email**

**Required attributes for sign-up:**
This is important! We need to collect information specific to issue tracking.

- âœ… **email** (always required)
- âœ… **family_name** (last name)
- âœ… **given_name** (first name)
- âœ… **name** (full name)

**Custom attributes:**
We need custom attributes for our multi-tenant issue tracker. **Click "Add custom attributes"**

**Custom attribute 1:**
- **Attribute name**: `company_id`
- **Attribute data type**: String
- **Mutable**: Yes (can be changed later)
- **Minimum length**: 1
- **Maximum length**: 50
- **Description**: Which company the user belongs to

**Custom attribute 2:**
- **Attribute name**: `user_role`
- **Attribute data type**: String
- **Mutable**: Yes (Super Admins can change this)
- **Minimum length**: 1
- **Maximum length**: 20
- **Description**: User role (user, admin, super_admin)

**Custom attribute 3:**
- **Attribute name**: `subscription_tier`
- **Attribute data type**: String
- **Mutable**: Yes
- **Minimum length**: 1
- **Maximum length**: 20
- **Description**: Company subscription tier (basic, premium, platinum)

**Custom attribute 4:**
- **Attribute name**: `team_memberships`
- **Attribute data type**: String
- **Mutable**: Yes
- **Minimum length**: 0
- **Maximum length**: 500
- **Description**: List of teams user belongs to

**Click "Next"**

### 2.5 Configure Message Delivery

**Step 4 - Message delivery:**

This is like setting up how the school sends letters to parents.

**Email provider:**
- Select **"Send email with Cognito"** (easier and free for getting started)

**SES Region:**
- Keep the default (same as your chosen region)

**FROM email address:**
- Keep **"noreply@verificationemail.com"** (default Amazon address)

**Reply-to email address:**
- Enter your email address (so users can reply to you if they need help)

**Click "Next"**

### 2.6 Integrate Your App

**Step 5 - Integrate your app:**

**User pool name:**
- `IssueTracker-UserPool-Shared` (this will be for Basic/Premium tiers)

**Hosted authentication pages:**
- âœ… **Use the Cognito Hosted UI** (Amazon will create login pages for us!)

**Domain:**
- Select **"Use a Cognito domain"**
- **Cognito domain**: `issue-tracker-[your-name]-[random-numbers]` (make it unique)
- Example: `issue-tracker-john-12345`

**Initial app client:**
- **App client name**: `IssueTracker-WebApp-Client`
- **Client secret**: âœ… **Generate a client secret** (more secure)

**Allowed callback URLs:**
For now, we'll use localhost for testing:
- `http://localhost:3000/callback`
- `http://localhost:5173/callback` (for Vite dev server)
- `http://localhost:8080/callback` (backup)

**Allowed sign-out URLs:**
- `http://localhost:3000/signout`
- `http://localhost:5173/signout`
- `http://localhost:8080/signout`

**Identity providers:**
- âœ… **Cognito user pool** (users sign up directly with us)

**OAuth 2.0 grant types:**
- âœ… **Authorization code grant** (most secure)
- âœ… **Implicit grant** (for simple web apps)

**OpenID Connect scopes:**
- âœ… **OpenID** (basic user info)
- âœ… **Email** (user's email)
- âœ… **Profile** (user's name and details)

**Advanced app client settings:**
- **Authentication flows**: 
  - âœ… **ALLOW_USER_SRP_AUTH** (secure remote password)
  - âœ… **ALLOW_REFRESH_TOKEN_AUTH** (stay signed in)

**Click "Next"**

### 2.7 Review and Create

**Step 6 - Review and create:**

Review all your settings carefully and **click "Create user pool"**

ğŸ‰ **Congratulations!** You've created your first user pool for your issue tracker!

## Step 3: Create User Groups for Different Roles

Now we'll create groups for our three user types plus system admin.

### 3.1 Create Role-Based Groups

1. **Click** on your newly created user pool `IssueTracker-UserPool-Shared`
2. **In the left sidebar**, click **"Groups"**
3. **Click "Create group"**

**Group 1 - Regular Users:**
- **Group name**: `Users`
- **Description**: `Regular users who can create and work on issues`
- **Precedence**: `50` (lowest priority)
- **IAM role**: Select `IssueTracker-UserRole` (from Part 2)
- **Click "Create group"**

**Group 2 - Admins:**
- **Group name**: `Admins`
- **Description**: `Admins who can manage teams and assign issues`
- **Precedence**: `20` (higher priority than users)
- **IAM role**: `IssueTracker-AdminRole`
- **Click "Create group"**

**Group 3 - Super Admins:**
- **Group name**: `SuperAdmins`
- **Description**: `Super Admins who can manage users and change roles`
- **Precedence**: `10` (high priority)
- **IAM role**: `IssueTracker-SuperAdminRole`
- **Click "Create group"**

**Group 4 - System Root (You):**
- **Group name**: `SystemRoot`
- **Description**: `System owner with complete access across all tenants`
- **Precedence**: `1` (highest priority)
- **IAM role**: `IssueTracker-SystemRootRole`
- **Click "Create group"**

### 3.2 Create Subscription Tier Groups

Now create groups based on subscription tiers:

**Group 5 - Basic Tier:**
- **Group name**: `BasicTier`
- **Description**: `Users from Basic tier companies`
- **Precedence**: `100`
- **IAM role**: `IssueTracker-UserRole`
- **Click "Create group"**

**Group 6 - Premium Tier:**
- **Group name**: `PremiumTier`
- **Description**: `Users from Premium tier companies`
- **Precedence**: `90`
- **IAM role**: `IssueTracker-UserRole`
- **Click "Create group"**

**Group 7 - Platinum Tier:**
- **Group name**: `PlatinumTier`
- **Description**: `Users from Platinum tier companies (dedicated resources)`
- **Precedence**: `80`
- **IAM role**: `IssueTracker-UserRole`
- **Click "Create group"**

## Step 4: Create Platinum Tier User Pool (For VIP Customers)

Platinum tier companies get their own dedicated user pool (like having a private school vs public school).

### 4.1 Create Second User Pool

1. **Go back to Cognito main page**
2. **Click "Create user pool"** again

Follow the same steps as before, but with these differences:

**Step 5 - Integrate your app:**
- **User pool name**: `IssueTracker-UserPool-Platinum-Template`
- **Cognito domain**: `issue-tracker-platinum-[your-name]-[random-numbers]`
- **App client name**: `IssueTracker-PlatinumApp-Client`

Everything else stays exactly the same.

### 4.2 Create Platinum Groups

In the new Platinum user pool, create these groups:
- **Users** (Precedence: 50)
- **Admins** (Precedence: 20) 
- **SuperAdmins** (Precedence: 10)
- **PlatinumTier** (Precedence: 80)

## Step 5: Configure Advanced Settings

### 5.1 Set Up Lambda Triggers

Lambda triggers allow us to customize what happens during authentication.

1. **Go to your "IssueTracker-UserPool-Shared"**
2. **Click "User pool properties"** in the left sidebar
3. **Scroll down to "Lambda triggers"**
4. **Click "Add Lambda trigger"**

We'll set up triggers for automatic user processing:

**Pre sign-up trigger:**
- This will automatically assign users to the right groups based on their company
- For now, select **"No trigger"** (we'll add this in Part 5 when we create Lambda functions)

**Post confirmation trigger:**
- This will run after a user confirms their email
- Select **"No trigger"** for now

**Pre token generation trigger:**
- This will add custom claims to JWT tokens
- Select **"No trigger"** for now

### 5.2 Configure Token Settings

1. **Click "App integration"** in the left sidebar
2. **Click on your app client "IssueTracker-WebApp-Client"**
3. **Click "Edit"**

**Token expiration:**
- **Refresh token expiration**: `30 days` (users stay logged in for a month)
- **Access token expiration**: `1 hour` (security token expires hourly)
- **ID token expiration**: `1 hour` (identity token expires hourly)

**Token revocation:**
- âœ… **Enable token revocation** (for security - can block hackers)

**Click "Save changes"**

### 5.3 Set Up Custom Scopes

Custom scopes define what information our issue tracker can access.

1. **Still in your app client settings**
2. **Scroll down to "Custom scopes"**
3. **Click "Add custom scope"**

**Custom Scope 1:**
- **Scope name**: `issue_access`
- **Description**: `Access to create and manage issues`

**Custom Scope 2:**
- **Scope name**: `team_access`
- **Description**: `Access to team management features`

**Custom Scope 3:**
- **Scope name**: `admin_access`
- **Description**: `Administrative access within company`

**Click "Save changes"**

## Step 6: Test User Registration

Let's test our user management system with real users!

### 6.1 Create Your First Test User (Company Super Admin)

1. **In your "IssueTracker-UserPool-Shared"**
2. **Click "Users"** in the left sidebar
3. **Click "Create user"**

**User details:**
- **Username**: `superadmin@techcorp.com`
- **Email address**: `superadmin@techcorp.com` (use a real email you can access)
- **Send an invitation to this new user**: âœ… **Check this**
- **Invitation message**: Keep default
- **Temporary password**: âœ… **Generate a password**
- **Mark phone number as verified**: âŒ **Uncheck**
- **Mark email as verified**: âœ… **Check**

**User attributes:**
- **given_name**: `Sarah`
- **family_name**: `Johnson`
- **name**: `Sarah Johnson`

**Custom attributes:**
- **custom:company_id**: `TECHCORP001`
- **custom:user_role**: `super_admin`
- **custom:subscription_tier**: `Premium`
- **custom:team_memberships**: `Leadership`

**Click "Create user"**

### 6.2 Add User to Groups

1. **Click on the user "superadmin@techcorp.com"**
2. **Click the "Group memberships" tab**
3. **Click "Add user to group"**
4. **Select "SuperAdmins" and "PremiumTier"**
5. **Click "Add"**

### 6.3 Create a Test Admin User

Repeat the process for an Admin:

**User details:**
- **Username**: `admin@techcorp.com`
- **Email address**: `admin@techcorp.com`

**Custom attributes:**
- **custom:company_id**: `TECHCORP001`
- **custom:user_role**: `admin`
- **custom:subscription_tier**: `Premium`
- **custom:team_memberships**: `Development,QA`

**Groups**: `Admins` and `PremiumTier`

### 6.4 Create a Test Regular User

And one more for a regular user:

**User details:**
- **Username**: `user@techcorp.com`
- **Email address**: `user@techcorp.com`

**Custom attributes:**
- **custom:company_id**: `TECHCORP001`
- **custom:user_role**: `user`
- **custom:subscription_tier**: `Premium`
- **custom:team_memberships**: `Development`

**Groups**: `Users` and `PremiumTier`

### 6.5 Test the Hosted UI

Let's test the sign-up and sign-in flow.

1. **Go back to your user pool "IssueTracker-UserPool-Shared"**
2. **Click "App integration"** in the left sidebar
3. **Scroll down to "Domain"**
4. **Click on your domain URL** (something like `https://issue-tracker-john-12345.auth.us-east-1.amazoncognito.com`)

You'll see the **Cognito Hosted UI sign-in page** for your issue tracker!

**Test Sign-In:**
1. **Click "Sign in"**
2. **Use one of your test user credentials**
3. **You'll need to set a new password** (since the original was temporary)

### 6.6 Test Sign-Up Flow

1. **On the hosted UI**, click **"Sign up"**
2. **Try creating a new user:**
   - **Email**: Use another email you can access
   - **Password**: Create a strong password
   - **Given name**: Your first name
   - **Family name**: Your last name
   - **Name**: Your full name

3. **Check your email** for verification code
4. **Enter the verification code**

ğŸ‰ **Success!** You've tested the user registration flow for your issue tracker!

## âœ… Verification Steps (Let's Make Sure Everything Works!)

### Test 1: User Pool Exists
- [ ] Navigate to Cognito â†’ User pools
- [ ] See both user pools:
  - `IssueTracker-UserPool-Shared`
  - `IssueTracker-UserPool-Platinum-Template`

### Test 2: Groups Are Set Up Correctly
- [ ] In shared user pool, click "Groups"
- [ ] See all 7 groups:
  - Users, Admins, SuperAdmins, SystemRoot
  - BasicTier, PremiumTier, PlatinumTier

### Test 3: Custom Attributes Work
- [ ] Create a test user
- [ ] Successfully set custom:company_id
- [ ] Successfully set custom:user_role
- [ ] Successfully set custom:subscription_tier
- [ ] Successfully set custom:team_memberships

### Test 4: Hosted UI Works
- [ ] Access the hosted UI URL
- [ ] See sign-in and sign-up pages
- [ ] Successfully sign up a test user
- [ ] Receive verification email
- [ ] Complete verification process

### Test 5: User Groups Assignment
- [ ] Add a user to multiple groups
- [ ] See group membership reflected in user details
- [ ] Verify IAM roles are attached to groups

### Test 6: Different User Roles
- [ ] Create users with different roles (user, admin, super_admin)
- [ ] Verify each has appropriate group memberships
- [ ] Test sign-in with different user types

## ğŸ”§ Understanding What We Built

### Multi-Tenant Issue Tracker User Architecture

```
ğŸ¢ Shared User Pool (Basic & Premium Companies)
â”œâ”€â”€ User Groups by Role:
â”‚   â”œâ”€â”€ Users (IAM: IssueTracker-UserRole)
â”‚   â”œâ”€â”€ Admins (IAM: IssueTracker-AdminRole)  
â”‚   â”œâ”€â”€ SuperAdmins (IAM: IssueTracker-SuperAdminRole)
â”‚   â””â”€â”€ SystemRoot (IAM: IssueTracker-SystemRootRole)
â”‚
â”œâ”€â”€ User Groups by Tier:
â”‚   â”œâ”€â”€ BasicTier (IAM: IssueTracker-UserRole)
â”‚   â”œâ”€â”€ PremiumTier (IAM: IssueTracker-UserRole)
â”‚   â””â”€â”€ PlatinumTier (IAM: IssueTracker-UserRole)
â”‚
â”œâ”€â”€ Custom Attributes:
â”‚   â”œâ”€â”€ company_id (which company they belong to)
â”‚   â”œâ”€â”€ user_role (user/admin/super_admin)
â”‚   â”œâ”€â”€ subscription_tier (basic/premium/platinum)
â”‚   â””â”€â”€ team_memberships (which teams they're in)
â”‚
â””â”€â”€ Authentication Flow:
    â”œâ”€â”€ Sign Up â†’ Email Verification â†’ Group Assignment
    â””â”€â”€ Sign In â†’ JWT Token (with company and role claims)

ğŸ›ï¸ Platinum User Pool (Dedicated for VIP companies)
â”œâ”€â”€ Groups: Users, Admins, SuperAdmins, PlatinumTier
â””â”€â”€ Completely isolated from shared pool
```

### Security Features We Implemented

1. **Company Isolation**: Custom attributes ensure users know which company they belong to
2. **Role-Based Access**: Different groups have different IAM roles and permissions
3. **Tier-Based Separation**: Platinum companies get dedicated resources
4. **Secure Authentication**: Strong password policies and optional MFA
5. **Token-Based Authorization**: JWT tokens carry company and role information

### Real-World Example: How It Works

**Scenario**: Sarah from TechCorp logs into your issue tracker

1. **Sarah enters** email and password on your hosted UI
2. **Cognito verifies** her credentials against TechCorp's user data
3. **Cognito checks** her custom attributes:
   - `company_id`: TECHCORP001
   - `user_role`: super_admin
   - `subscription_tier`: Premium
4. **Cognito assigns** her to SuperAdmins and PremiumTier groups
5. **Cognito generates** JWT token with her permissions
6. **Your issue tracker** uses this token to show only TechCorp's issues
7. **Sarah can** add/remove users because she's a Super Admin
8. **Sarah cannot** see StartupInc's issues (different company)

## ğŸš¨ Troubleshooting Common Issues

### Issue 1: Can't create user pool
**Problem**: Missing permissions or wrong region
**Solution**: 
1. Make sure you're signed in as your IAM user with AdministratorAccess
2. Verify you're in the correct region

### Issue 2: Custom domain not available
**Problem**: Domain name not unique
**Solution**: Try a different domain name with your name and random numbers

### Issue 3: Can't add custom attributes
**Problem**: User pool already has users, or attributes already exist
**Solution**: 
1. Custom attributes can only be added during pool creation
2. Delete and recreate the pool if needed (for learning)

### Issue 4: Hosted UI not loading
**Problem**: Callback URL mismatch or domain issues
**Solution**: 
1. Check callback URLs are exactly correct (including http://)
2. Try accessing the domain URL directly first
3. Wait a few minutes for DNS propagation

### Issue 5: Email verification not working
**Problem**: Email in spam folder or email settings wrong
**Solution**:
1. Check spam/junk folder
2. Verify email settings in message delivery section
3. Try using a different email provider (Gmail usually works well)

### Issue 6: Can't assign user to group
**Problem**: User or group doesn't exist in the same pool
**Solution**:
1. Verify user exists in the correct user pool
2. Verify group exists in the same user pool
3. Check that IAM roles exist and are properly configured

### Issue 7: Users can sign up but can't sign in
**Problem**: User needs to verify email or set permanent password
**Solution**:
1. Check if email verification is required
2. Users with temporary passwords must change them on first login
3. Check user status in the Users tab

## ğŸ¯ What We Accomplished (Amazing Work!)

Fantastic job! You now have:
- âœ… A complete multi-tenant user management system for your issue tracker
- âœ… Separate user pools for different customer tiers (shared vs dedicated)
- âœ… User groups that map to your issue tracker roles (User, Admin, Super Admin)
- âœ… Custom attributes for company identification and role management
- âœ… Secure authentication flows with email verification
- âœ… Hosted UI for easy sign-up and sign-in (no need to build login pages!)
- âœ… Integration with IAM roles for proper authorization
- âœ… Foundation for tenant-aware issue tracking

### What This Means for Your Issue Tracker

You now have a **professional user management system** that:
- **Keeps companies completely separate** (TechCorp can't see StartupInc's data)
- **Manages user roles properly** (Users can't delete other users, only Super Admins can)
- **Scales automatically** (can handle thousands of companies and users)
- **Provides security** (strong passwords, email verification, optional MFA)
- **Integrates with AWS services** (your Lambda functions will know who's calling them)

## ğŸ” Multi-Tenant User Management Best Practices

1. **Company Isolation**: Every user knows exactly which company they belong to
2. **Role Separation**: Clear distinction between Users, Admins, and Super Admins
3. **Tier-Based Resources**: Premium customers get better resources and features
4. **Security First**: Strong passwords, email verification, optional MFA
5. **Scalable Architecture**: Can handle thousands of companies and millions of users
6. **Audit Trail**: All user actions can be tracked back to specific individuals

## ğŸ”œ What's Next?

In **Part 4: Database Setup**, we'll:
- Set up Amazon DynamoDB tables for our multi-tenant issue tracker data
- Design table schemas that enforce company isolation
- Create tables for issues, users, teams, and comments
- Set up indexes for efficient querying (find issues by assignee, status, etc.)
- Implement different database strategies for different subscription tiers
- Test data operations with company-scoped access
- Connect our user system to actual issue tracking data

Think of this as building the **"digital filing cabinets"** for your issue tracker:
- **Issues Cabinet**: Stores all issues, bugs, and tasks
- **Teams Cabinet**: Stores team information and memberships  
- **Comments Cabinet**: Stores discussions and updates on issues
- **Analytics Cabinet**: Stores usage data and metrics

The database setup is crucial because it's where the actual **company data isolation** happens. We'll make sure that when Sarah from TechCorp searches for issues, she only sees TechCorp's issues, never StartupInc's issues.

This is where your issue tracker really comes to life - users can finally create, assign, and track real issues!

**Ready to continue?** Head to [Part 4: Database Setup](./04.%20Database%20Setup.md)!

---

## ğŸ“ Important Information to Save

**User Pool Information**:
- Shared User Pool ID: `_________________` (find in User pool overview)
- Shared User Pool ARN: `_________________`
- Platinum User Pool ID: `_________________`
- Domain URL: `https://issue-tracker-[your-name]-12345.auth.[region].amazoncognito.com`

**App Client Information**:
- Client ID: `_________________` (find in App integration â†’ App clients)
- Client Secret: `_________________` (save securely - you'll need this later!)

**Groups Created**:
- âœ… Users (Precedence: 50)
- âœ… Admins (Precedence: 20)  
- âœ… SuperAdmins (Precedence: 10)
- âœ… SystemRoot (Precedence: 1)
- âœ… BasicTier (Precedence: 100)
- âœ… PremiumTier (Precedence: 90)
- âœ… PlatinumTier (Precedence: 80)

**Test User Accounts**:
- Super Admin: `superadmin@techcorp.com`
- Admin: `admin@techcorp.com`  
- User: `user@techcorp.com`

*ğŸ’¡ Pro Tip: Take screenshots of your user pool dashboard and hosted UI - they'll help you remember your setup when building the frontend later!*

*ğŸ‰ Celebrate: You just built a user management system that could handle thousands of companies! You understand concepts that power apps like Slack, Jira, and Linear. That's pretty incredible!*