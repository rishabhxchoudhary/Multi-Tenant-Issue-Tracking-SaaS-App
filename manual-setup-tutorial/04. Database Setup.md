# üì¶ Part 4: Database Setup (Amazon DynamoDB) - Single Table Design

## What We'll Accomplish in This Part

By the end of this tutorial, you will:

- ‚úÖ Understand what single-table DynamoDB design is and why it's superior for SaaS
- ‚úÖ Create one highly optimized DynamoDB table using AWS Console
- ‚úÖ Learn advanced DynamoDB concepts like partition keys, sort keys, and GSIs
- ‚úÖ Implement perfect multi-tenant data isolation using smart key design
- ‚úÖ Set up efficient query patterns for all your issue tracking needs
- ‚úÖ Add sample data and test company isolation
- ‚úÖ Reduce database costs by ~80% compared to multi-table approaches
- ‚úÖ Build a foundation that scales from 1 to 10,000+ companies seamlessly

**‚è∞ Estimated Time: 90-110 minutes**

## What is Single-Table DynamoDB Design? (Simple Explanation)

### Traditional Multi-Table Approach (What Most People Do)

Think of traditional database design like having **separate filing cabinets** for everything in your office:

üóÑÔ∏è **The Old Way - Multiple Filing Cabinets**:
- Cabinet 1: Company information
- Cabinet 2: Issues
- Cabinet 3: Teams
- Cabinet 4: Users
- Cabinet 5: Comments
- Cabinet 6: Settings
- Cabinet 7: Reports

**Problems with this approach**:
- üí∞ **Expensive**: Pay for 7 separate filing cabinets (even when mostly empty)
- üêå **Slow**: Walking between cabinets takes time (multiple database queries)
- üîß **Complex**: Hard to organize related information together
- üìä **Inefficient**: Difficult to get complete picture quickly

### Single-Table Approach (The Smart Way)

Think of single-table design like having **one super-organized filing system**:

üìã **The New Way - One Smart Filing System**:
- One large, intelligently organized filing cabinet
- Related information stored together (issues with their comments)
- Multiple index systems for different ways to find things
- Everything organized by company first (perfect isolation)
- Smart labeling system (partition keys and sort keys)

**Benefits of this approach**:
- üí∞ **80% Cost Savings**: Pay for one system instead of seven
- ‚ö° **Lightning Fast**: Related data is nearby (single query gets everything)
- üîß **Simple Operations**: One table to monitor, backup, and maintain
- üìä **Complete Information**: Everything available instantly
- üöÄ **ACID Transactions**: Update related data together safely

### Real-World Analogy for Issue Tracking

**Old Way**: Like having separate drawers for:
- Customer information
- Support tickets
- Team assignments
- Ticket comments
- User accounts

When someone asks "Show me all information about Company ABC's urgent tickets", you have to:
1. Look in customer drawer for company info
2. Look in tickets drawer for their issues
3. Look in assignments drawer for who's working on what
4. Look in comments drawer for recent updates
5. Combine all the information manually

**New Way**: Like having one smart filing system where:
- All Company ABC information is in one section
- Tickets are stored with their comments nearby
- Multiple index tabs let you find things different ways
- One lookup gives you everything you need instantly

## Understanding Multi-Tenant Database Design for Issue Tracking

### The Company Isolation Challenge

In a multi-tenant SaaS platform, **company isolation** is critical:

```
üè¢ Company A should NEVER see Company B's data:

Company A (Acme Corp)          Company B (Beta Tech)
‚îú‚îÄ‚îÄ Issues                     ‚îú‚îÄ‚îÄ Issues
‚îú‚îÄ‚îÄ Teams                      ‚îú‚îÄ‚îÄ Teams
‚îú‚îÄ‚îÄ Users                      ‚îú‚îÄ‚îÄ Users
‚îî‚îÄ‚îÄ Comments                   ‚îî‚îÄ‚îÄ Comments
```

### Our Single-Table Solution

Instead of separate tables, we use **smart key design**:

```
üéØ One Table with Smart Organization:

IssueTracker-SingleTable
‚îú‚îÄ‚îÄ COMPANY#ACME | METADATA          (Company A info)
‚îú‚îÄ‚îÄ COMPANY#ACME | ISSUE#ISS-001     (Company A issue)
‚îú‚îÄ‚îÄ COMPANY#ACME | TEAM#BACKEND      (Company A team)
‚îú‚îÄ‚îÄ COMPANY#ACME | USER#john@acme    (Company A user)
‚îú‚îÄ‚îÄ COMPANY#BETA | METADATA          (Company B info)
‚îú‚îÄ‚îÄ COMPANY#BETA | ISSUE#ISS-001     (Company B issue)
‚îî‚îÄ‚îÄ COMPANY#BETA | USER#mike@beta    (Company B user)

üîç Plus 3 Smart Indexes for fast lookups:
‚îú‚îÄ‚îÄ GSI1: Find user's assigned issues across companies
‚îú‚îÄ‚îÄ GSI2: Find issues by status and priority
‚îî‚îÄ‚îÄ GSI3: Find team workloads and assignments
```

**How Company Isolation Works**:
- Each company gets a unique partition key: `COMPANY#ACME`, `COMPANY#BETA`
- DynamoDB automatically keeps different partitions separate
- Queries for `COMPANY#ACME` can never return `COMPANY#BETA` data
- Perfect isolation with zero chance of data leaks

## Step 1: Understanding DynamoDB Key Concepts for Issue Tracking

### 1.1 Primary Keys (Your Smart Filing System)

**Partition Key (PK)**: Like the main folder label
- Determines which "section" of the database stores the data
- Groups related information together
- Example: `COMPANY#ACME` (all Acme Corp data in one section)

**Sort Key (SK)**: Like sub-folder organization within each section
- Sorts and organizes items within the same partition
- Enables range queries (find all issues, all teams, etc.)
- Example: `ISSUE#ISS-001#2024-01-15` (specific issue with timestamp)

### 1.2 Our Company Isolation Strategy

**For All Company Data**: Use company ID in partition key

```
Company Information:
PK: "COMPANY#ACME"
SK: "METADATA"
Data: {company details, subscription info, etc.}

Company Issues:
PK: "COMPANY#ACME"
SK: "ISSUE#ISS-001#2024-01-15T10:30:00Z"
Data: {title: "Login bug", status: "Open", assignee: "john@acme.com"}

Company Teams:
PK: "COMPANY#ACME"
SK: "TEAM#BACKEND"
Data: {team_name: "Backend Team", members: [...]}

Company Users:
PK: "COMPANY#ACME"
SK: "USER#john@acme.com"
Data: {name: "John Doe", role: "Admin"}
```

**For Issue Comments**: Group with the issue they belong to

```
Issue Comments:
PK: "ISSUE#ACME#ISS-001"
SK: "COMMENT#CMT-001#2024-01-15T11:30:00Z"
Data: {author: "jane@acme.com", content: "Working on this"}
```

### 1.3 Global Secondary Indexes (GSIs) - Alternative Filing Systems

Think of GSIs like **alternative ways to organize the same information**:

**GSI1 - CrossEntityIndex**: Find things by user or across companies
- Find all issues assigned to a specific user
- Find which company a user belongs to
- Find all teams a user leads

**GSI2 - StatusTimeIndex**: Find things by status, priority, or time
- Find all "Open" issues for a company
- Find all "High Priority" issues
- Find recently updated issues

**GSI3 - TeamAssignmentIndex**: Find things by team
- Find all issues assigned to a team
- Find team workload and capacity
- Find team members and their roles

## Step 2: Create the Single Table in AWS Console

### 2.1 Access DynamoDB Service

1. **Sign in** to AWS Console (as your IAM user)
2. **Search** for `DynamoDB` in the search bar
3. Click **"DynamoDB"** from the results
4. In the left sidebar, click **"Tables"**
5. Click the orange **"Create table"** button

### 2.2 Configure Basic Table Settings

**Table Details**:
1. **Table name**: Enter `IssueTracker-SingleTable`
2. **Partition key**: Enter `PK` and select **String** from the dropdown
3. **Sort key**: Check the box for "Sort key"
4. **Sort key name**: Enter `SK` and select **String** from the dropdown

### 2.3 Configure Table Settings

1. **Table settings**: Select **"Customize settings"**
2. **Table class**: Leave as **"DynamoDB Standard"**
3. **Capacity mode**: Select **"On-demand"**
   - This automatically scales based on usage
   - Perfect for development and production
   - No need to guess capacity requirements

### 2.4 Create Global Secondary Indexes

We need to create 3 GSIs. Click **"Create global secondary index"** for each:

**GSI 1 - CrossEntityIndex**:
1. **Index name**: `CrossEntityIndex`
2. **Partition key**: `GSI1PK` (String)
3. **Sort key**: `GSI1SK` (String)
4. **Projected attributes**: Select **"All"**

**GSI 2 - StatusTimeIndex**:
1. Click **"Create global secondary index"** again
2. **Index name**: `StatusTimeIndex`
3. **Partition key**: `GSI2PK` (String)
4. **Sort key**: `GSI2SK` (String)
5. **Projected attributes**: Select **"All"**

**GSI 3 - TeamAssignmentIndex**:
1. Click **"Create global secondary index"** again
2. **Index name**: `TeamAssignmentIndex`
3. **Partition key**: `GSI3PK` (String)
4. **Sort key**: `GSI3SK` (String)
5. **Projected attributes**: Select **"All"**

### 2.5 Configure Advanced Settings

**Encryption**:
1. **Encryption at rest**: Select **"Owned by Amazon DynamoDB"**
   - This provides encryption without additional costs
   - Suitable for development and most production use cases

**Point-in-time Recovery**:
1. Check **"Enable point-in-time recovery"**
   - This enables backup and restore capabilities
   - Essential for production data protection

**Tags** (Optional but recommended):
1. Click **"Add tag"** and add these tags:
   - Key: `Project`, Value: `IssueTrackingSaaS`
   - Key: `Environment`, Value: `Development`
   - Key: `Architecture`, Value: `SingleTable`

### 2.6 Create the Table

1. Review all your settings:
   - Table name: `IssueTracker-SingleTable`
   - Keys: `PK` (partition), `SK` (sort)
   - 3 GSIs created with proper names
   - On-demand capacity mode
2. Click **"Create table"**

**‚è≥ Wait for table creation** (usually takes 2-3 minutes). The status will change from "Creating" to "Active".

## Step 3: Understanding Our Data Model

### 3.1 Entity Types and Key Patterns

Here's how we organize different types of data:

```
üìã Entity Types and Their Keys:

1. Company Metadata:
   PK: "COMPANY#ACME"
   SK: "METADATA"

2. Issues:
   PK: "COMPANY#ACME"
   SK: "ISSUE#ISS-001#2024-01-15T10:30:00Z"

3. Teams:
   PK: "COMPANY#ACME"
   SK: "TEAM#BACKEND"

4. Users:
   PK: "COMPANY#ACME"
   SK: "USER#john@acme.com"

5. Comments:
   PK: "ISSUE#ACME#ISS-001"
   SK: "COMMENT#CMT-001#2024-01-15T11:30:00Z"

6. System Configuration:
   PK: "SYSTEM#CONFIG"
   SK: "API_TIER#Premium"
```

### 3.2 Global Secondary Index Strategy

**GSI1 (CrossEntityIndex)**: User-centric queries
- `GSI1PK: "USER#john@acme.com"`, `GSI1SK: "ISSUE#ISS-001"` ‚Üí Find user's issues
- `GSI1PK: "EMAIL#john@acme.com"`, `GSI1SK: "USER#ACME"` ‚Üí Find user's company
- `GSI1PK: "TIER#Premium"`, `GSI1SK: "COMPANY#ACME"` ‚Üí Find companies by tier

**GSI2 (StatusTimeIndex)**: Status and time-based filtering
- `GSI2PK: "COMPANY#ACME#STATUS#Open"`, `GSI2SK: "2024-01-15T10:30:00Z"` ‚Üí Open issues by time
- `GSI2PK: "COMPANY#ACME#PRIORITY#High"`, `GSI2SK: "2024-01-15T10:30:00Z"` ‚Üí High priority issues

**GSI3 (TeamAssignmentIndex)**: Team operations
- `GSI3PK: "TEAM#ACME#BACKEND"`, `GSI3SK: "ISSUE#ISS-001"` ‚Üí Team's issues
- `GSI3PK: "TEAM#ACME#BACKEND"`, `GSI3SK: "USER#john@acme.com"` ‚Üí Team members

## Step 4: Add Sample Data Using AWS Console

Now let's populate our table with realistic sample data to test the design.

### 4.1 Access Your Table

1. In DynamoDB console, click **"Tables"** in the left sidebar
2. Click on **"IssueTracker-SingleTable"**
3. Click the **"Explore table items"** tab
4. Click **"Create item"**

### 4.2 Add Sample Company Data

**Company 1 - Acme Corp**:

1. Click **"Create item"**
2. Select **"JSON"** view (easier for complex data)
3. Replace the default JSON with:

```json
{
  "PK": "COMPANY#ACME",
  "SK": "METADATA",
  "EntityType": "COMPANY",
  "company_id": "ACME",
  "company_name": "Acme Corporation",
  "company_tier": "Premium",
  "contact_email": "admin@acme.com",
  "subscription_status": "active",
  "created_date": "2024-01-10T09:00:00Z",
  "monthly_quota": 10000,
  "api_calls_used": 2500,
  "max_users": 25,
  "current_users": 5,
  "GSI1PK": "TIER#Premium",
  "GSI1SK": "COMPANY#ACME"
}
```

4. Click **"Create item"**

**Company 2 - Beta Tech**:

1. Click **"Create item"** again
2. Select **"JSON"** view
3. Add this data:

```json
{
  "PK": "COMPANY#BETA",
  "SK": "METADATA",
  "EntityType": "COMPANY",
  "company_id": "BETA",
  "company_name": "Beta Technologies",
  "company_tier": "Basic",
  "contact_email": "admin@betatech.com",
  "subscription_status": "active",
  "created_date": "2024-01-10T09:00:00Z",
  "monthly_quota": 1000,
  "api_calls_used": 150,
  "max_users": 5,
  "current_users": 3,
  "GSI1PK": "TIER#Basic",
  "GSI1SK": "COMPANY#BETA"
}
```

4. Click **"Create item"**

### 4.3 Add Sample Issue Data

**Acme Corp Issue**:

```json
{
  "PK": "COMPANY#ACME",
  "SK": "ISSUE#ISS-001#2024-01-15T10:30:00Z",
  "EntityType": "ISSUE",
  "company_id": "ACME",
  "issue_id": "ISS-001",
  "title": "Login page not loading correctly",
  "description": "Users report that the login page shows a blank screen after entering credentials",
  "status": "In Progress",
  "priority": "High",
  "issue_type": "Bug",
  "assigned_user": "john@acme.com",
  "assigned_team": "BACKEND",
  "reporter": "jane@acme.com",
  "created_date": "2024-01-15T10:30:00Z",
  "updated_date": "2024-01-15T14:30:00Z",
  "due_date": "2024-01-20T17:00:00Z",
  "labels": ["urgent", "login", "ui"],
  "estimated_hours": 8,
  "story_points": 5,
  "GSI1PK": "USER#john@acme.com",
  "GSI1SK": "ISSUE#ISS-001",
  "GSI2PK": "COMPANY#ACME#STATUS#In Progress",
  "GSI2SK": "2024-01-15T10:30:00Z",
  "GSI3PK": "TEAM#ACME#BACKEND",
  "GSI3SK": "ISSUE#ISS-001"
}
```

**Beta Tech Issue**:

```json
{
  "PK": "COMPANY#BETA",
  "SK": "ISSUE#ISS-001#2024-01-12T09:15:00Z",
  "EntityType": "ISSUE",
  "company_id": "BETA",
  "issue_id": "ISS-001",
  "title": "Add dark mode theme",
  "description": "Implement dark mode theme for better user experience",
  "status": "Open",
  "priority": "Medium",
  "issue_type": "Feature",
  "assigned_user": "mike@betatech.com",
  "reporter": "sarah@betatech.com",
  "created_date": "2024-01-12T09:15:00Z",
  "updated_date": "2024-01-12T09:15:00Z",
  "labels": ["enhancement", "ui"],
  "estimated_hours": 16,
  "story_points": 8,
  "GSI1PK": "USER#mike@betatech.com",
  "GSI1SK": "ISSUE#ISS-001",
  "GSI2PK": "COMPANY#BETA#STATUS#Open",
  "GSI2SK": "2024-01-12T09:15:00Z"
}
```

### 4.4 Add Sample Team Data

**Acme Backend Team**:

```json
{
  "PK": "COMPANY#ACME",
  "SK": "TEAM#BACKEND",
  "EntityType": "TEAM",
  "company_id": "ACME",
  "team_id": "BACKEND",
  "team_name": "Backend Development Team",
  "description": "Responsible for server-side development and API maintenance",
  "team_lead": "john@acme.com",
  "members": ["john@acme.com", "alice@acme.com"],
  "created_date": "2024-01-10T09:00:00Z",
  "status": "active",
  "max_members": 8,
  "current_workload": 15,
  "skills": ["Python", "AWS", "DynamoDB"],
  "timezone": "America/New_York",
  "GSI1PK": "LEAD#john@acme.com",
  "GSI1SK": "TEAM#BACKEND"
}
```

### 4.5 Add Sample User Data

**Acme User - John (Team Lead)**:

```json
{
  "PK": "COMPANY#ACME",
  "SK": "USER#john@acme.com",
  "EntityType": "USER",
  "company_id": "ACME",
  "email": "john@acme.com",
  "user_id": "USER-001",
  "first_name": "John",
  "last_name": "Doe",
  "user_role": "Admin",
  "is_active": true,
  "last_login_date": "2024-01-15T08:00:00Z",
  "created_date": "2024-01-10T09:00:00Z",
  "timezone": "America/New_York",
  "GSI1PK": "EMAIL#john@acme.com",
  "GSI1SK": "USER#ACME"
}
```

**Beta User - Mike**:

```json
{
  "PK": "COMPANY#BETA",
  "SK": "USER#mike@betatech.com",
  "EntityType": "USER",
  "company_id": "BETA",
  "email": "mike@betatech.com",
  "user_id": "USER-001",
  "first_name": "Mike",
  "last_name": "Johnson",
  "user_role": "User",
  "is_active": true,
  "last_login_date": "2024-01-12T10:30:00Z",
  "created_date": "2024-01-08T14:20:00Z",
  "timezone": "America/Los_Angeles",
  "GSI1PK": "EMAIL#mike@betatech.com",
  "GSI1SK": "USER#BETA"
}
```

### 4.6 Add Sample Comment Data

**Comment on Acme Issue**:

```json
{
  "PK": "ISSUE#ACME#ISS-001",
  "SK": "COMMENT#CMT-001#2024-01-15T11:30:00Z",
  "EntityType": "COMMENT",
  "company_id": "ACME",
  "issue_id": "ISS-001",
  "comment_id": "CMT-001",
  "author_email": "alice@acme.com",
  "author_name": "Alice Smith",
  "content": "I've reproduced this issue in the staging environment. It seems to be related to the new authentication flow.",
  "created_date": "2024-01-15T11:30:00Z",
  "is_internal": false,
  "attachments": ["error_screenshot.png"],
  "mentions": ["john@acme.com"],
  "GSI1PK": "AUTHOR#alice@acme.com",
  "GSI1SK": "COMMENT#CMT-001#2024-01-15T11:30:00Z"
}
```

### 4.7 Add System Configuration Data

**Premium Tier Configuration**:

```json
{
  "PK": "SYSTEM#CONFIG",
  "SK": "API_TIER#Premium",
  "EntityType": "API_CONFIG",
  "tier_name": "Premium",
  "daily_limit": 10000,
  "rate_limit_per_second": 100,
  "max_users": 25,
  "features": ["advanced_analytics", "custom_workflows", "priority_support"]
}
```

**Basic Tier Configuration**:

```json
{
  "PK": "SYSTEM#CONFIG",
  "SK": "API_TIER#Basic",
  "EntityType": "API_CONFIG",
  "tier_name": "Basic",
  "daily_limit": 1000,
  "rate_limit_per_second": 10,
  "max_users": 5,
  "features": ["basic_analytics", "standard_workflows"]
}
```

## Step 5: Test Company Isolation and Query Patterns

### 5.1 Test Perfect Company Isolation

Let's verify that company data is perfectly isolated:

**Query 1: Get all Acme Corp data**
1. In the **"Explore table items"** tab
2. Click **"Query"** (not Scan)
3. **Index**: Select **"Table"** (the main table)
4. **Partition key**: Enter `COMPANY#ACME`
5. Leave **Sort key** blank (this gets all items for this company)
6. Click **"Run"**

‚úÖ **Expected Result**: You should see only Acme data:
- Company metadata
- Issues (ISS-001)
- Teams (BACKEND)
- Users (john@acme.com)

**Query 2: Get all Beta Tech data**
1. Change **Partition key** to: `COMPANY#BETA`
2. Click **"Run"**

‚úÖ **Expected Result**: You should see only Beta data, completely separate from Acme

**Query 3: Verify Isolation** (This should be impossible)
1. Query for `COMPANY#ACME`
2. Look through all results for any Beta Tech data

‚úÖ **Expected Result**: Zero Beta data appears (perfect isolation)

### 5.2 Test Cross-Entity Queries with GSIs

**Test GSI1 - Find User's Assigned Issues**:
1. **Index**: Select **"CrossEntityIndex"**
2. **GSI1PK**: Enter `USER#john@acme.com`
3. Leave **GSI1SK** blank
4. Click **"Run"**

‚úÖ **Expected Result**: Shows all issues assigned to john@acme.com

**Test GSI2 - Find Issues by Status**:
1. **Index**: Select **"StatusTimeIndex"**
2. **GSI2PK**: Enter `COMPANY#ACME#STATUS#In Progress`
3. Click **"Run"**

‚úÖ **Expected Result**: Shows all "In Progress" issues for Acme Corp, sorted by time

**Test GSI3 - Find Team's Issues**:
1. **Index**: Select **"TeamAssignmentIndex"**
2. **GSI3PK**: Enter `TEAM#ACME#BACKEND`
3. Click **"Run"**

‚úÖ **Expected Result**: Shows all issues and users assigned to Backend team

### 5.3 Test Comments Grouped with Issues

**Query Issue Comments**:
1. **Index**: Select **"Table"**
2. **Partition key**: Enter `ISSUE#ACME#ISS-001`
3. Click **"Run"**

‚úÖ **Expected Result**: Shows all comments for that specific issue, grouped together and sorted chronologically

## Step 6: Understanding Performance Benefits

### 6.1 Query Performance Comparison

**Traditional Multi-Table Approach** (What we avoided):
```
To get "Company + Issues + Teams + Users":
1. Query CompanyTable (100ms)
2. Query IssuesTable (150ms)
3. Query TeamsTable (120ms)
4. Query UsersTable (130ms)
Total: 500ms + network latency
```

**Our Single-Table Approach**:
```
To get "Company + Issues + Teams + Users":
1. Query SingleTable with PK="COMPANY#ACME" (80ms)
Total: 80ms (6x faster!)
```

### 6.2 Cost Analysis (Real Numbers)

**Multi-Table Cost Estimate**:
```
7 Tables √ó $0.25/GB = $1.75/GB base cost
15+ GSIs √ó $0.25/GB = $3.75/GB GSI cost
Multiple write operations = Higher WCU costs
Total: ~$5.50/GB + operation costs
```

**Single-Table Cost**:
```
1 Table √ó $0.25/GB = $0.25/GB base cost
3 GSIs √ó $0.25/GB = $0.75/GB GSI cost
Efficient writes = Lower WCU costs
Total: ~$1.00/GB + operation costs (80% savings!)
```

**Real Example**: For 100GB of data:
- Multi-table: ~$550/month
- Single-table: ~$100/month
- **Savings: $450/month (82% reduction)**

## Step 7: Advanced Testing and Verification

### 7.1 Test Complex Query Patterns

**Find All Premium Companies**:
1. **Index**: Select **"CrossEntityIndex"**
2. **GSI1PK**: Enter `TIER#Premium`
3. Click **"Run"**

‚úÖ **Expected Result**: Shows all Premium tier companies

**Find Comments by Author**:
1. **Index**: Select **"CrossEntityIndex"**
2. **GSI1PK**: Enter `AUTHOR#alice@acme.com`
3. Click **"Run"**

‚úÖ **Expected Result**: Shows all comments written by alice@acme.com

### 7.2 Test Data Consistency

**Verify User Email Lookup**:
1. **Index**: Select **"CrossEntityIndex"**
2. **GSI1PK**: Enter `EMAIL#john@acme.com`
3. Click **"Run"**

‚úÖ **Expected Result**: Shows user record with their company affiliation

## ‚úÖ Verification Checklist

### Database Structure ‚úÖ
- [ ] Table `IssueTracker-SingleTable` created successfully
- [ ] 3 Global Secondary Indexes created:
  - [ ] CrossEntityIndex (GSI1PK, GSI1SK)
  - [ ] StatusTimeIndex (GSI2PK, GSI2SK)
  - [ ] TeamAssignmentIndex (GSI3PK, GSI3SK)
- [ ] On-demand billing mode enabled
- [ ] Point-in-time recovery enabled

### Sample Data ‚úÖ
- [ ] 2 Companies added (ACME Premium, BETA Basic)
- [ ] 2 Issues added (one per company)
- [ ] 1 Team added (Acme Backend)
- [ ] 2 Users added (one per company)
- [ ] 1 Comment added
- [ ] 2 API tier configs added

### Company Isolation ‚úÖ
- [ ] Query `COMPANY#ACME` returns only Acme data
- [ ] Query `COMPANY#BETA` returns only Beta data
- [ ] No data leakage between companies

### GSI Queries ‚úÖ
- [ ] CrossEntityIndex: Find user's issues
- [ ] StatusTimeIndex: Find issues by status
- [ ] TeamAssignmentIndex: Find team assignments
- [ ] All GSI queries return expected results

### Performance Verification ‚úÖ
- [ ] Single partition query retrieves complete company data
- [ ] Related data (issues + comments) grouped efficiently
- [ ] GSI queries provide instant lookups
- [ ] No complex joins or multi-table operations needed

## üö® Common Issues and Solutions

### Issue: "No items returned" for queries

**Problem**: Incorrect key format or typos
**Solution**:
- Double-check partition key exactly matches: `COMPANY#ACME` (not `Company#Acme`)
- Verify sort key format: `ISSUE#ISS-001#2024...` (not `ISSUE-001`)
- Use "Query" not "Scan" for partition key lookups

### Issue: GSI query doesn't work

**Problem**: GSI keys not populated in items
**Solution**:
- Verify GSI1PK, GSI1SK fields exist in your items
- Check GSI key format matches exactly: `USER#john@acme.com`
- Wait a few minutes for GSI to update after item creation

### Issue: Wrong data appears in queries

**Problem**: Incorrect partition key format allows data mixing
**Solution**:
- Always use consistent key format: `COMPANY#{company_id}`
- Never use Scan operations in production
- Double-check sample data partition keys

## üéØ What We Accomplished

**Revolutionary Database Architecture**:
- ‚úÖ Created one optimized table instead of 7+ separate tables
- ‚úÖ Achieved perfect multi-tenant isolation using smart key design
- ‚úÖ Implemented 3 strategic GSIs covering all access patterns
- ‚úÖ Set up efficient query patterns for lightning-fast performance
- ‚úÖ Added realistic sample data demonstrating company isolation
- ‚úÖ Tested all query patterns to verify functionality

**Performance & Cost Benefits**:
-
